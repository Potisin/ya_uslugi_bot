### Бот-скрипт для парсинга и отклика заказов с сайта https://uslugi.yandex.ru/

#### Функционал:
1. Телеграм бот (bot.py) - изменяет список ключевых слов, по которым происходит
поиск заказов, уведомляет в чат о том, что заказчик пригласил в чат или уже
выбрал как исполнителя. Бот написан на aiogram 3.0.
2. Скрапер-скрипт (scraper.py) - подключается к сайту, просматривает заказы, ведет учет новых и существующих,
откликается, проверяет реакцию заказчика (чат или выбор как исполнитель) на отклик. Скрапер написан на Selenium 4.17.
Для работы необходимо будет вручную сохранить cookies с сайта.
Данный подход и библиотека выбраны по причине того, что на сайте предусмотрена обязательная двухфакторная аутентификация,
а так же абсолютно весь контент, а так же csrf токены генерируются динамически.  
*Дополнительно: в файле scraper.py в функции apply_for_order есть возможность указать текст
сообщения, которое будет отправлено заказчику при отклике. Сейчас отправляется пустое сообщение ''*

#### Запуск:  
- В корне проекта создать .env файл с переменными:

```
POSTGRES_HOST=db  
POSTGRES_PORT=5432  
POSTGRES_DB=postgres  
POSTGRES_USER=postgres  
POSTGRES_PASSWORD=postgres  
TG_BOT_TOKEN={УКАЗАТЬ ТОКЕН ТЕЛЕГРАМ БОТА}
CHAT_ID={УКАЗАТЬ ID чата, куда будут приходить уведомления}
```

- python3 -m venv .venv  
- pip install -r requirements.txt  
- запустить локально postgresql или docker run -p 5432:5432 --name ya_uslugi_bot_pg -e POSTGRES_USER=postgres -e 
POSTGRES_PASSWORD=postgres -e POSTGRES_DB=postgres -d postgres:13.3
- alembic upgrade head
- Сохранение куки из браузера. Установить расширение EditThisCookie, перейти на сайт https://uslugi.yandex.ru/, 
залогиниться, зайти в расширение, нажать на кнопку Экспортировать, создать файл cookies.json в директории 
src/data, вставить скопированные куки в файл
- отредактировать ключевые слова вручную (src/data/keywords.json) или при запуске телеграм бота
- запустить вместе или отдельно bot.py, scraper.py
